{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\LABSREACT\\\\lab1\\\\screens\\\\HomeScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport uuidv1 from 'uuid/v1';\nimport _values from 'lodash.values';\nimport { AppLoading } from 'expo';\nimport * as Font from 'expo-font';\nimport Header from \"../components/Header\";\nimport Item from \"../components/Item\";\nimport FloatingButton from \"../components/FloatingButton\";\nimport { Button } from 'native-base';\nimport { SearchBar } from 'react-native-elements';\nimport { ButtonGroup } from 'react-native-elements';\nexport var HomeScreen = function (_Component) {\n  _inherits(HomeScreen, _Component);\n\n  var _super = _createSuper(HomeScreen);\n\n  function HomeScreen() {\n    var _this;\n\n    _classCallCheck(this, HomeScreen);\n\n    _this = _super.call(this);\n\n    _this.componentDidMount = function () {\n      _this.loadItems();\n    };\n\n    _this.loadItems = function _callee() {\n      var getItems, parsedItems;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(Font.loadAsync({\n                Roboto: require(\"../node_modules/native-base/Fonts/Roboto.ttf\"),\n                Roboto_medium: require(\"../node_modules/native-base/Fonts/Roboto_medium.ttf\")\n              }));\n\n            case 3:\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('laboneitems'));\n\n            case 5:\n              getItems = _context.sent;\n              parsedItems = JSON.parse(getItems);\n              console.log(parsedItems);\n\n              _this.setState({\n                isDataReady: true,\n                items: parsedItems || {},\n                cloneItems: parsedItems || {}\n              });\n\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              alert('Application Error. Cannot load data.');\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 11]], Promise);\n    };\n\n    _this.addTodo = function (item) {\n      var newItem = item;\n\n      if (Object.keys(newItem).length !== 0) {\n        _this.setState(function (prevState) {\n          var ID = uuidv1();\n\n          var newItemObject = _defineProperty({}, ID, {\n            id: ID,\n            date: newItem.date,\n            title: newItem.title,\n            text: newItem.text,\n            category: newItem.category\n          });\n\n          var newState = _objectSpread(_objectSpread({}, prevState), {}, {\n            items: _objectSpread(_objectSpread({}, prevState.items), newItemObject)\n          });\n\n          _this.saveItems(newState.items);\n\n          return _objectSpread({}, newState);\n        });\n      }\n    };\n\n    _this.deleteTodo = function (id) {\n      _this.setState(function (prevState) {\n        var items = prevState.items;\n        var cloneItems = prevState.cloneItems;\n        delete items[id];\n        delete cloneItems[id];\n\n        var newState = _objectSpread(_objectSpread(_objectSpread({}, prevState), items), cloneItems);\n\n        _this.saveItems(newState.items);\n\n        return _objectSpread({}, newState);\n      });\n    };\n\n    _this.clickItem = function (obj) {\n      _this.props.navigation.navigate('ShowScreen', {\n        date: obj.date,\n        title: obj.title,\n        text: obj.text,\n        category: obj.category\n      });\n    };\n\n    _this.saveItems = function (newItems) {\n      var saveItems = AsyncStorage.setItem('laboneitems', JSON.stringify(newItems));\n    };\n\n    _this.onPressFab = function () {\n      _this.props.navigation.navigate('AddTask', {\n        saveItem: _this.addTodo\n      });\n    };\n\n    _this.onPressAbout = function () {\n      _this.props.navigation.navigate('About');\n    };\n\n    _this.updateSearch = function (search) {\n      var filtered = _values(_this.state.cloneItems).filter(function (word) {\n        return (word.title.toLowerCase() + word.text.toLowerCase() + ' ' + new Date(word.date).toLocaleDateString(\"ru-RU\")).includes(search.toLowerCase());\n      });\n\n      console.log('[SEARCH]', filtered);\n\n      _this.setState({\n        items: filtered\n      });\n\n      _this.setState({\n        search: search\n      });\n    };\n\n    _this.state = {\n      isDataReady: false,\n      items: {},\n      cloneItems: {},\n      search: '',\n      selectedIndex: null\n    };\n    _this.updateIndex = _this.updateIndex.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(HomeScreen, [{\n    key: \"updateIndex\",\n    value: function updateIndex(selectedIndex) {\n      console.log('clone Items', _values(this.state.cloneItems));\n      console.log('index', selectedIndex);\n\n      if (selectedIndex == this.state.selectedIndex) {\n        this.setState({\n          selectedIndex: null,\n          items: _values(this.state.cloneItems)\n        });\n      } else {\n        var filtered = _values(this.state.cloneItems).filter(function (item) {\n          return parseInt(item.category) == parseInt(selectedIndex);\n        });\n\n        console.log('[changeIndex]', filtered);\n        var test = filtered.map(function (item) {\n          return {\n            id: item.id\n          };\n        });\n        console.log(test);\n        this.setState(_objectSpread({}, filtered));\n        console.log('[changeIndex]', selectedIndex);\n        this.setState({\n          selectedIndex: selectedIndex\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var search = this.state.search;\n      var isDataReady = this.state.isDataReady;\n\n      if (!isDataReady) {\n        return React.createElement(AppLoading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 20\n          }\n        });\n      }\n\n      var buttons = [{\n        element: function element() {\n          return React.createElement(Text, {\n            style: {\n              backgroundColor: '#27ae60',\n              width: '98%',\n              height: '98%',\n              borderRadius: '100%'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 21\n            }\n          });\n        }\n      }, {\n        element: function element() {\n          return React.createElement(Text, {\n            style: {\n              backgroundColor: '#3498db',\n              width: '98%',\n              height: '98%',\n              borderRadius: '100%'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 21\n            }\n          });\n        }\n      }, {\n        element: function element() {\n          return React.createElement(Text, {\n            style: {\n              backgroundColor: '#f1c40f',\n              width: '98%',\n              height: '98%',\n              borderRadius: '100%'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 21\n            }\n          });\n        }\n      }];\n      var selectedIndex = this.state.selectedIndex;\n      console.log(this.state.items);\n      console.log(_values(this.state.items));\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }\n      }), React.createElement(StatusBar, {\n        barStyle: \"light-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 5\n        }\n      }), React.createElement(ButtonGroup, {\n        onPress: this.updateIndex,\n        selectedIndex: selectedIndex,\n        buttons: buttons,\n        containerStyle: styles.containerStyle,\n        buttonStyle: styles.buttonStyle,\n        selectedButtonStyle: styles.selectedButtonStyle,\n        containerBorderRadius: 0,\n        underlayColor: \"#eeeeee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 5\n        }\n      }), React.createElement(SearchBar, {\n        lightTheme: true,\n        placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A...\",\n        onChangeText: this.updateSearch,\n        value: search,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 5\n        }\n      }), React.createElement(FlatList, {\n        data: _values(this.state.items),\n        contentContainerStyle: styles.content,\n        renderItem: function renderItem(row) {\n          return React.createElement(Item, {\n            dateT: row.item.date,\n            titleT: row.item.title,\n            textT: row.item.text,\n            categoryT: row.item.category,\n            id: row.item.id,\n            deleteTodo: _this2.deleteTodo,\n            clickItem: _this2.clickItem,\n            alertF: _this2.alertF,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 8\n            }\n          });\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: {\n          width: 380,\n          height: 50,\n          alignItems: 'flex-end',\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 5\n        }\n      }, React.createElement(Button, {\n        onPress: this.onPressFab,\n        style: {\n          borderRadius: 0,\n          backgroundColor: '#1abc9c'\n        },\n        title: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: \"center\",\n          width: 380,\n          color: '#FFFFFF'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 8\n        }\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")), React.createElement(Button, {\n        onPress: this.onPressAbout,\n        style: {\n          borderRadius: 0,\n          backgroundColor: '#2c3e50'\n        },\n        title: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 6\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: \"center\",\n          width: 380,\n          color: '#FFFFFF'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 7\n        }\n      }, \"\\u041E \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u0447\\u0438\\u043A\\u0435\"))));\n    }\n  }]);\n\n  return HomeScreen;\n}(Component);\nHomeScreen.navigationOptions = {\n  header: null\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  content: {\n    flex: 1,\n    alignSelf: 'stretch'\n  },\n  contentHeader: {\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  containerStyle: {\n    height: 50,\n    width: 350,\n    backgroundColor: '#ffffff',\n    marginTop: 10,\n    borderRadius: 0,\n    justifyContent: \"center\"\n  },\n  buttonStyle: {\n    width: 50,\n    borderRadius: '100%',\n    backgroundColor: '#eeeeee',\n    borderWidth: 2,\n    borderColor: '#ffffff',\n    alignSelf: \"center\"\n  },\n  selectedButtonStyle: {\n    borderColor: '#34495e',\n    borderWidth: 2\n  }\n});\nexport default HomeScreen;","map":{"version":3,"sources":["C:/LABSREACT/lab1/screens/HomeScreen.js"],"names":["React","Component","uuidv1","_values","AppLoading","Font","Header","Item","FloatingButton","Button","SearchBar","ButtonGroup","HomeScreen","componentDidMount","loadItems","loadAsync","Roboto","require","Roboto_medium","AsyncStorage","getItem","getItems","parsedItems","JSON","parse","console","log","setState","isDataReady","items","cloneItems","alert","addTodo","item","newItem","Object","keys","length","prevState","ID","newItemObject","id","date","title","text","category","newState","saveItems","deleteTodo","clickItem","obj","props","navigation","navigate","newItems","setItem","stringify","onPressFab","saveItem","onPressAbout","updateSearch","search","filtered","state","filter","word","toLowerCase","Date","toLocaleDateString","includes","selectedIndex","updateIndex","bind","parseInt","test","map","buttons","element","backgroundColor","width","height","borderRadius","styles","container","containerStyle","buttonStyle","selectedButtonStyle","content","row","alertF","alignItems","flexDirection","textAlign","color","navigationOptions","header","StyleSheet","create","flex","alignSelf","contentHeader","justifyContent","marginTop","borderWidth","borderColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Text, View, FlatList, StyleSheet, StatusBar, AsyncStorage } from 'react-native'\r\nimport uuidv1 from 'uuid/v1'\r\nimport _values from 'lodash.values'\r\nimport { AppLoading } from 'expo'\r\nimport * as Font from 'expo-font'\r\nimport Header from '../components/Header'\r\nimport Item from '../components/Item'\r\nimport FloatingButton from '../components/FloatingButton'\r\nimport { Button } from 'native-base'\r\nimport { SearchBar } from 'react-native-elements';\r\nimport { ButtonGroup } from 'react-native-elements';\r\n\r\n\r\n\r\nexport class HomeScreen extends Component {\r\n\r\n    static navigationOptions = {\r\n        header: null\r\n    }\r\n\r\n\tconstructor () {\r\n\t\tsuper()\r\n\t\tthis.state = {\r\n\t\t\tisDataReady: false,\r\n\t\t\titems: {},\r\n\t\t\tcloneItems: {},\r\n\t\t\tsearch: '',\r\n\t\t  selectedIndex: null\r\n\t\t}\r\n\t\tthis.updateIndex = this.updateIndex.bind(this)\r\n\t  }\r\n\r\n    // state = {\r\n    //     isDataReady: false,\r\n\t// \titems: {},\r\n\t// \tcloneItems: {},\r\n\t// \tsearch: '',\r\n\t// \tselectedIndex: 0,\r\n\t// }\r\n\t\r\n\r\n\t\r\n    componentDidMount = () => {\r\n        this.loadItems()\r\n    }\r\n\r\n    loadItems = async () => {\r\n        try {\r\n            await Font.loadAsync({\r\n                Roboto: require('../node_modules/native-base/Fonts/Roboto.ttf'),\r\n                Roboto_medium: require('../node_modules/native-base/Fonts/Roboto_medium.ttf')\r\n            })\r\n\r\n            const getItems = await AsyncStorage.getItem('laboneitems')\r\n\t\t\tconst parsedItems = JSON.parse(getItems)\r\n\t\t\tconsole.log(parsedItems);\r\n            this.setState({ isDataReady: true, items: parsedItems || {}, cloneItems: parsedItems || {} })\r\n        } catch (err) {\r\n            alert('Application Error. Cannot load data.')\r\n        }\r\n\t}\r\n\t\r\n\taddTodo = item => {\r\n\t\tconst newItem = item\r\n\t\tif(Object.keys(newItem).length !== 0) {\r\n        \tthis.setState(prevState => {\r\n        \t\tconst ID = uuidv1()\r\n        \t\tconst newItemObject = {\r\n        \t\t\t[ID]: {\r\n        \t\t\t\tid: ID,\r\n\t\t\t\t\t\tdate: newItem.date,\r\n\t\t\t\t\t\ttitle: newItem.title,\r\n\t\t\t\t\t\ttext: newItem.text,\r\n        \t\t\t\tcategory: newItem.category\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\tconst newState = {\r\n        \t\t\t...prevState,\r\n        \t\t\titems: {\r\n        \t\t\t\t...prevState.items,\r\n        \t\t\t\t...newItemObject\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\tthis.saveItems(newState.items)\r\n        \t\t// this.saveItems(newState.cloneItems)\r\n        \t\treturn { ...newState }\r\n        \t})\r\n        }\r\n\t}\r\n\r\n\tdeleteTodo = id => {\r\n        this.setState(prevState => {\r\n            const items = prevState.items\r\n            const cloneItems = prevState.cloneItems\r\n\t\t\tdelete items[id]\r\n\t\t\tdelete cloneItems[id]\r\n\r\n            const newState = {\r\n                ...prevState,\r\n\t\t\t\t...items,\r\n\t\t\t\t...cloneItems\r\n            }\r\n            this.saveItems(newState.items)\r\n            return { ...newState }\r\n        })\r\n\t}\r\n\r\n\tclickItem = obj => {\r\n\t\tthis.props.navigation.navigate('ShowScreen', {\r\n\t\t\tdate: obj.date,\r\n\t\t\ttitle: obj.title,\r\n\t\t\ttext: obj.text,\r\n\t\t\tcategory: obj.category,\r\n\t\t})\r\n    }\r\n\r\n    saveItems = newItems => {\r\n        const saveItems = AsyncStorage.setItem('laboneitems', JSON.stringify(newItems))\r\n\t}\r\n\r\n\tonPressFab = () => {\r\n        this.props.navigation.navigate('AddTask', {\r\n            saveItem: this.addTodo\r\n        })\r\n\t}\r\n\tonPressAbout = () => {\r\n\t\tthis.props.navigation.navigate('About');\r\n\t}\r\n\r\n\tupdateSearch = search => {\r\n\r\n\t\tlet filtered = _values(this.state.cloneItems).filter(word =>\r\n\t\t\t(\r\n\t\t\t\tword.title.toLowerCase() +\r\n\t\t\t\tword.text.toLowerCase() +\r\n\t\t\t\t' ' +\r\n\t\t\t\tnew Date(word.date).toLocaleDateString(\"ru-RU\")\r\n\t\t\t)\r\n\t\t\t.includes(search.toLowerCase()));\r\n\r\n\t\tconsole.log('[SEARCH]',filtered);\r\n\r\n\t\tthis.setState({\r\n\t\t\titems: filtered\r\n\t\t});\r\n\t\tthis.setState({ search });\r\n\t};\r\n\r\n\tupdateIndex(selectedIndex) {\r\n\r\n\t\tconsole.log('clone Items', _values(this.state.cloneItems));\r\n\t\tconsole.log('index', selectedIndex);\r\n\r\n\t\tif (selectedIndex == this.state.selectedIndex) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedIndex: null,\r\n\t\t\t\titems: _values(this.state.cloneItems)\r\n\t\t\t})\r\n\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tlet filtered = _values(this.state.cloneItems).filter(item => parseInt(item.category) == (parseInt(selectedIndex)));\r\n\t\t\t\r\n\t\t\tconsole.log('[changeIndex]', filtered);\r\n\r\n\t\t\tlet test = filtered.map(function(item) {\r\n\t\t\t\treturn {id: item.id};\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log(test);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...filtered\r\n\t\t\t});\r\n\r\n\t\r\n\t\t\tconsole.log('[changeIndex]', selectedIndex);\r\n\r\n\t\t\tthis.setState({ selectedIndex })\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n    render() {\r\n\t\tconst { search } = this.state;\r\n        const { isDataReady } = this.state\r\n\r\n        if (!isDataReady) {\r\n            return <AppLoading />\r\n\t\t}\r\n\t\t\r\n\t\tconst buttons = [\r\n\t\t\t{ element: () => <Text style={{backgroundColor: '#27ae60', width: '98%', height: '98%', borderRadius: '100%' }}></Text> },\r\n\t\t\t{ element: () => <Text style={{backgroundColor: '#3498db', width: '98%', height: '98%', borderRadius: '100%' }}></Text> },\r\n\t\t\t{ element: () => <Text style={{backgroundColor: '#f1c40f', width: '98%', height: '98%', borderRadius: '100%' }}></Text> },\r\n\t\t]\r\n\t\tconst { selectedIndex } = this.state;\r\n\r\n\t\tconsole.log(this.state.items)\r\n\t\tconsole.log(_values(this.state.items))\r\n\r\n        return (\r\n            <View style={styles.container}>\r\n                <Header/>\r\n\t\t\t\t<StatusBar barStyle='light-content' />\r\n\r\n\t\t\t\t<ButtonGroup\r\n\t\t\t\t\tonPress={this.updateIndex}\r\n\t\t\t\t\tselectedIndex={selectedIndex}\r\n\t\t\t\t\tbuttons={buttons}\r\n\t\t\t\t\tcontainerStyle={styles.containerStyle}\r\n\t\t\t\t\tbuttonStyle={styles.buttonStyle}\r\n\t\t\t\t\tselectedButtonStyle={styles.selectedButtonStyle}\r\n\t\t\t\t\tcontainerBorderRadius={0}\r\n\t\t\t\t\tunderlayColor='#eeeeee'\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<SearchBar\r\n\t\t\t\t\tlightTheme\r\n\t\t\t\t\tplaceholder=\"Поиск...\"\r\n\t\t\t\t\tonChangeText={this.updateSearch}\r\n\t\t\t\t\tvalue={search}\r\n\t\t\t\t/>\r\n\r\n                <FlatList\r\n                    data={_values(this.state.items)}\r\n                    contentContainerStyle={styles.content}\r\n                    renderItem={row => {\r\n                        return (\r\n\t\t\t\t\t\t\t<Item\r\n\t\t\t\t\t\t\t\tdateT={row.item.date}\r\n\t\t\t\t\t\t\t\ttitleT={row.item.title}\r\n\t\t\t\t\t\t\t\ttextT={row.item.text}\r\n\t\t\t\t\t\t\t\tcategoryT={row.item.category}\r\n\t\t\t\t\t\t\t\tid={row.item.id}\r\n\t\t\t\t\t\t\t\tdeleteTodo={this.deleteTodo}\r\n\t\t\t\t\t\t\t\tclickItem = {this.clickItem}\r\n\t\t\t\t\t\t\t\talertF={this.alertF}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n                    }}\r\n                    keyExtractor={item => item.id}\r\n                />\r\n\t\t\t\t{/* <FloatingButton actionOnPress={this.onPressFab} /> */}\r\n\r\n\t\t\t\t<View style={{\r\n\t\t\t\t\t\r\n\t\t\t\t\twidth: 380,\r\n\t\t\t\t\theight: 50,\r\n\t\t\t\t\talignItems: 'flex-end',\r\n\t\t\t\t\tflexDirection: 'row',\r\n\t\t\t\t}}>\r\n\r\n\t\t\t\t\t\t<Button onPress={this.onPressFab} style={{ borderRadius: 0, backgroundColor: '#1abc9c'}} title=\"Добавить\">\r\n\t\t\t\t\t\t\t<Text style={{ textAlign: \"center\", width: 380, color: '#FFFFFF'}}>\r\n\t\t\t\t\t\t\t\tДобавить\r\n\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onPress={this.onPressAbout} style={{ borderRadius: 0, backgroundColor: '#2c3e50'}} title=\"Добавить\">\r\n\t\t\t\t\t\t<Text style={{ textAlign: \"center\", width: 380, color: '#FFFFFF'}}>\r\n\t\t\t\t\t\t\tО разработчике\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t</View>\r\n\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\tcontainer: {\r\n\t\tflex: 1\r\n\t},\r\n\tcontent: {\r\n\t\tflex: 1,\r\n\t\talignSelf: 'stretch'\r\n\t},\r\n\tcontentHeader: {\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'center'\r\n\t},\r\n\tcontainerStyle: {\r\n        height: 50,\r\n\t\twidth: 350,\r\n        // borderTopRightRadius: 20,\r\n        backgroundColor: '#ffffff',\r\n        marginTop: 10,\r\n\t\tborderRadius: 0,\r\n\t\tjustifyContent: \"center\",\r\n    },\r\n\tbuttonStyle: {\r\n\t\twidth: 50,\r\n\t\tborderRadius: '100%',\r\n        backgroundColor: '#eeeeee',\r\n\t\tborderWidth: 2,\r\n\t\tborderColor: '#ffffff', \r\n\t\talignSelf: \"center\"\r\n    },\r\n    selectedButtonStyle: {\r\n\t\tborderColor: '#34495e', \r\n\t\tborderWidth: 2,\r\n    },\r\n})\r\n\r\nexport default HomeScreen"]},"metadata":{},"sourceType":"module"}